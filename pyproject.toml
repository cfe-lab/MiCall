[project]
name = "micall"
version = "7.17.0"
description = "Pipeline for processing FASTQ data from an Illumina MiSeq to genotype human RNA viruses like HIV and hepatitis C."
authors = [
    { name = "British Columbia Centre for Excellence in HIV/AIDS", email = "vmysak@bccfe.ca" },
]
license = {text = "AGPL-3.0-or-later"}
readme = "README.md"
requires-python = ">=3.7"
classifiers = [
    "License :: OSI Approved :: GNU Affero General Public License v3 or later (AGPLv3+)",
    "Programming Language :: Python",
    "Programming Language :: Python :: 3",
    "Programming Language :: Python :: 3.8",
    "Programming Language :: Python :: 3.9",
    "Programming Language :: Python :: 3.10",
    "Programming Language :: Python :: 3.11",
    "Operating System :: OS Independent",
    "Development Status :: 5 - Production/Stable",
    "Intended Audience :: Science/Research",
    "Intended Audience :: Developers",
    "Topic :: Scientific/Engineering :: Bio-Informatics",
]

dependencies = [
    # Requirements for running the bare pipeline under Kive.
    "pytz==2024.1",
    "iva @ git+https://github.com/cfe-lab/iva.git@v1.1.1",
    "biopython==1.83",
    "gotoh @ git+https://github.com/cfe-lab/gotoh.git@v0.3.0#egg=gotoh&subdirectory=alignment/gotoh",
    "pyvdrm @ git+https://github.com/cfe-lab/pyvdrm.git@v0.3.2",
    "numpy==1.24.3",
    "scipy==1.10.1",
    "matplotlib==3.7.3",
    "cutadapt==4.8",
    "python-Levenshtein==0.25.1",
    "PyYAML==6.0.1",
    "reportlab==4.2.0",
    "pysam==0.22.1",
    "genetracks @ git+https://github.com/cfe-lab/genetracks.git@v0.4",
    "mappy==2.17",
    "drawsvg==2.3.0",
    "cairosvg==2.7.1",
    "aligntools",
]

[project.optional-dependencies]
test = [
    # Dependencies required for running the test suite
    "pytest==8.2.2",
    "coverage==7.5.3",
    "pandas==2.0.2",
    "seaborn==0.13.2",
    "ete3",
    # For reading HCV rules from an Excel file.
    "openpyxl==3.1.3",

    # Also includes watcher's dependencies.
    "kiveapi @ git+https://github.com/cfe-lab/Kive.git@v0.15#egg=kiveapi&subdirectory=api",
    "requests==2.32.3",
]
dev = [
    # Dependencies required for development (linting, type checking, etc.)
    "flake8==7.0.0",
    "mypy==1.10.0",
    "mypy-extensions==1.0.0",
    "gprof2dot==2024.6.6",
    "utilities",
]
watcher = [
    # Requirements for running the MISEQ_MONITOR.py script
    "kiveapi @ git+https://github.com/cfe-lab/Kive.git@v0.15#egg=kiveapi&subdirectory=api",
    "requests==2.32.3",
]
basespace = [
    # Requirements for running the micall_basespace.py script
    "requests==2.32.3",
]

[project.scripts]
micall = "micall.main:cli"

[tool.hatch.build]
include = [
  "micall/",
  "basespace/",  # TODO: do we really need this in the package?
  "gui/",        # TODO: do we really need this in the package?
  "*.py",
]
exclude = [
  "micall/tests/",
]
skip-excluded-dirs = true

[project.urls]
homepage = "https://cfe-lab.github.io/MiCall"
repository = "https://github.com/cfe-lab/MiCall"

[build-system]
requires = ["hatchling"]
build-backend = "hatchling.build"

[tool.hatch.metadata]
allow-direct-references = true
